#!/usr/bin/env bash
#
# Set login environment variables on macOS

zshenv="$HOME/.dotfiles/zsh/zshenv"
zprofile="$HOME/.dotfiles/zsh/zprofile"

# Source files to expand necessary environment variables
. "$zshenv"
. "$zprofile"

# Read exported variables into the macOS launchctl environment
grep "^export" "$zshenv" "$zprofile" | while IFS=' =' read ignoreexport envvar ignorevalue; do
    launchctl setenv "${envvar}" "${!envvar}"
done
